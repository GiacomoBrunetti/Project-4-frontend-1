<h1>{{ eventsShow.event.name }}</h1>
<img class="EventShowImg" ng-src="{{ eventsShow.event.image_src }}" alt="{{ eventsShow.event.name }}">
<p><strong>Where: </strong>{{ eventsShow.event.location }}</p>
<p><strong>When: </strong>{{ eventsShow.event.date | date: 'EEEE, d MMMM yyyy' }}</p>
<p><strong>About: </strong>{{ eventsShow.event.description }}</p>
<p><strong>Price: </strong>Â£{{ eventsShow.event.price }}</p>
<p><span class="ticksleft">{{ eventsShow.event.tickets_left }}</span> tickets left</p>
<p>Host: <a ui-sref="usersShow({ id: eventsShow.event.user.id })">{{ eventsShow.event.user.username }}</a></p>
<img src="eventsShow.event.user.image" alt="{{ eventsShow.event.user.username }}'s Photo">

<div>
  <button class="btn btn-primary" ng-if="main.isAuthenticated() && main.currentUser.id === eventsShow.event.user.id" ui-sref="eventsEdit({ id:eventsShow.event.id })">Edit Your Event</button>
  <button class="btn btn-danger" ng-if="main.isAuthenticated() && main.currentUser.id === eventsShow.event.user.id" ng-click="eventsShow.open()">Delete Your Event</button>
</div>


<!-- THESE BUTTONS ARE A WORK IN PROGRESS -->
<div ng-controller="TicketsConfirmCtrl as ticketsConfirm">
  <button class="btn btn-primary" ng-if="main.isAuthenticated() && main.currentUser.id !== eventsShow.event.user.id &&  (!eventsShow.event.users.indexOf(main.currentUser.id))" ng-click="ticketsConfirm.create()">Attend This Event</button>
  <button class="btn btn-danger" ng-if="main.isAuthenticated() && main.currentUser.id !== eventsShow.event.user.id &&  (eventsShow.event.users.indexOf(main.currentUser.id))" ng-click="ticketsConfirm.delete(ticket)">Unattend This Event</button>
  <!-- {{ eventsShow.event.users }} -->
</div>
<!-- ////////////////////////////////////////// -->


<h1>Attendees!</h1>
<div>
  <p class="attendees" ng-repeat="user in eventsShow.event.users"><a ui-sref="usersShow({ id: user.id })">{{ user.username }}</a></p>
</div>



<div class="comments">
  <div class="row">
    <div class="col-md-6">
      <h2>Comments</h2>
      <ul>
        <li ng-repeat="comment in eventsShow.event.comments"><strong><a ui-sref="usersShow({ id: comment.user.id })">{{ comment.user.username }}</a> says: </strong>{{ comment.body }} <button ng-click="eventsShow.deleteComment(comment)" ng-if="main.isAuthenticated() && main.currentUser.id === comment.user.id">Delete Comment</button></li>
      </ul>
    </div>

    <div ng-if="main.isAuthenticated()">
      <h2>Add Comment</h2>
      <form ng-submit="eventsShow.addComment()">
        <textarea type="text" name="body" ng-model="eventsShow.comment.body"></textarea>
        <button>Post Comment</button>
      </form>
    </div>
  </div>
</div>
